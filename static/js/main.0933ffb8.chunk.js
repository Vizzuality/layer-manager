(window.webpackJsonpsandbox=window.webpackJsonpsandbox||[]).push([[0],{110:function(e,t){},193:function(e,t,n){e.exports=n(324)},257:function(e,t,n){},258:function(e,t,n){},282:function(e,t){},322:function(e,t,n){},323:function(e,t,n){},324:function(e,t,n){"use strict";n.r(t);var a=n(9),o=n.n(a),r=n(103),i=n.n(r),c=n(0),s=n(5),l=n(35),d=n.n(l);function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,a)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(n,!0).forEach(function(t){Object(c.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var m=function(e,t){var n=new Date(t),a=new Date(e),o=Date.UTC(n.getFullYear(),n.getMonth(),n.getDate()),r=Date.UTC(a.getFullYear(),a.getMonth(),a.getDate());return Math.floor((r-o)/864e5)},g=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e||{},n=t.startDate,a=t.endDate,o=t.minDate,r=t.maxDate;if(!n||!a||!o||!r)return null;var i=new Date(o),c=new Date(r),s=m(c,i),l=new Date(n),d=new Date(a),p=s-m(c,l),u=s-m(c,d),g=p||0,f=u||s;return{startDayIndex:g,endDayIndex:f,numberOfDays:s}},f=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.reduce(function(e,t){var n=t.key,a=t.default;return u({},e,Object(c.a)({},n,a))},{}),a=u({},n,{},t),o=a.startDate,r=a.endDate,i=a.trimEndDate,s=a.maxAbsoluteDate,l=o,p=r>s?s:r,m=i>s?s:i;return u({},a,{},!!l&&{startYear:d()(l).year(),startMonth:d()(l).month(),startDay:d()(l).dayOfYear()},{},!!r&&{endYear:d()(p).year(),endMonth:d()(p).month(),endDay:d()(p).dayOfYear()},{},!!i&&{trimEndYear:d()(m).year(),trimEndMonth:d()(m).month(),trimEndDay:d()(m).dayOfYear()},{},g(a))},y=n(151),b=n(2),h=n(1),v=n(7),w=n(4),O=n(8),j=n(145),C=n.n(j),D=n(54),P=n.n(D),E=n(38),x=n.n(E),k=n(90),S=n(329),z=n(150);n(256),n(257);function M(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,a)}return n}function I(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?M(n,!0).forEach(function(t){Object(c.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):M(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var L={zoom:2,lat:0,lng:0},Y=function(e){function t(){var e,n;Object(b.a)(this,t);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return(n=Object(v.a)(this,(e=Object(w.a)(t)).call.apply(e,[this].concat(o)))).events={},n.state={viewport:I({},L,{},n.props.viewport),flying:!1,loaded:!1},n.onLoad=function(){var e=n.props,t=e.bounds,a=e.onLoad;n.setState({loaded:!0}),!x()(t)&&t.bbox&&n.fitBounds(),a({map:n.map,mapContainer:n.mapContainer})},n.onViewportChange=function(e,t){var a=n.props.onViewportChange;n.setState({viewport:e}),a(e)},n.onResize=function(e){var t=n.props.onViewportChange,a=I({},n.state.viewport,{},e);n.setState({viewport:a}),t(a)},n.onMoveEnd=function(){var e=n.props.onViewportChange,t=n.state.viewport;if(n.map){var a=n.map.getBearing(),o=n.map.getPitch(),r=n.map.getZoom(),i=n.map.getCenter(),c=i.lng,s=I({},t,{bearing:a,pitch:o,zoom:r,latitude:i.lat,longitude:c});n.setState({viewport:s}),e(s)}},n.fitBounds=function(){var e=n.state.viewport,t=n.props,a=t.bounds,o=t.onViewportChange,r=a.bbox,i=a.options,c=I({width:n.mapContainer.offsetWidth,height:n.mapContainer.offsetHeight},e),s=new S.a(c).fitBounds([[r[0],r[1]],[r[2],r[3]]],i),l=s.longitude,d=s.latitude,p=s.zoom,u=I({},n.state.viewport,{longitude:l,latitude:d,zoom:p,transitionDuration:2500,transitionInterruption:k.b.UPDATE});n.setState({flying:!0,viewport:u}),o(u),setTimeout(function(){n.setState({flying:!1})},2500)},n}return Object(O.a)(t,e),Object(h.a)(t,[{key:"componentDidUpdate",value:function(e){var t=e.viewport,n=e.bounds,a=this.props,o=a.viewport,r=a.bounds,i=this.state.viewport;P()(o,t)||this.setState({viewport:I({},i,{},o)}),x()(r)||P()(r,n)||this.fitBounds()}},{key:"render",value:function(){var e=this,t=this.props,n=t.customClass,a=t.children,r=(t.getCursor,t.dragPan),i=t.dragRotate,s=t.scrollZoom,l=t.touchZoom,d=t.touchRotate,p=t.doubleClickZoom,u=Object(y.a)(t,["customClass","children","getCursor","dragPan","dragRotate","scrollZoom","touchZoom","touchRotate","doubleClickZoom"]),m=this.state,g=m.viewport,f=m.loaded,b=m.flying;return o.a.createElement("div",{ref:function(t){e.mapContainer=t},className:C()(Object(c.a)({"c-map":!0},n,!!n))},o.a.createElement(k.c,Object.assign({ref:function(t){e.map=t&&t.getMap()}},u,g,{width:"100%",height:"100%",dragPan:!b&&r,dragRotate:!b&&i,scrollZoom:!b&&s,touchZoom:!b&&l,touchRotate:!b&&d,doubleClickZoom:!b&&p,onViewportChange:this.onViewportChange,onResize:this.onResize,onLoad:this.onLoad,transitionInterpolator:new k.a,transitionEasing:z.a}),f&&!!this.map&&"function"===typeof a&&a(this.map)))}}]),t}(a.Component);Y.defaultProps={children:null,customClass:null,viewport:L,bounds:{},dragPan:!0,dragRotate:!0,onViewportChange:function(){},onLoad:function(){},getCursor:function(e){var t=e.isHovering,n=e.isDragging;return t?"pointer":n?"grabbing":"grab"}};var T=Y,F=(n(258),function(e){function t(){return Object(b.a)(this,t),Object(v.a)(this,Object(w.a)(t).apply(this,arguments))}return Object(O.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=this.props.children;return o.a.createElement("div",{className:"c-sidebar"},o.a.createElement("div",{className:"sidebar--scroll"},e))}}]),t}(o.a.Component)),R=n(147),Z=n.n(R),q=(n(264),n(265),n(105)),V=n(149),B=n(45),N=[{id:"gain",name:"Tree cover gain",config:{type:"raster",source:{type:"raster",tiles:["https://earthengine.google.org/static/hansen_2013/gain_alpha/{z}/{x}/{y}.png"],minzoom:3,maxzoom:12}},legendConfig:{type:"basic",items:[{name:"Tree cover gain",color:"#6D6DE5"}]}},{id:"loss",name:"Tree cover loss",config:{type:"raster",source:{type:"raster",tiles:["https://storage.googleapis.com/wri-public/Hansen_16/tiles/hansen_world/v1/tc30/{z}/{x}/{y}.png"],minzoom:3,maxzoom:12}},legendConfig:{enabled:!0},decodeConfig:[{default:"2001-01-01",key:"startDate",required:!0},{default:"2018-12-31",key:"endDate",required:!0}],timelineConfig:{step:1,speed:250,interval:"years",dateFormat:"YYYY",trimEndDate:"2018-12-31",maxDate:"2018-12-31",minDate:"2001-01-01",canPlay:!0,railStyle:{background:"#DDD"},trackStyle:[{background:"#dc6c9a"},{background:"#982d5f"}]},decodeFunction:"\n      // values for creating power scale, domain (input), and range (output)\n      float domainMin = 0.;\n      float domainMax = 255.;\n      float rangeMin = 0.;\n      float rangeMax = 255.;\n\n      float exponent = zoom < 13. ? 0.3 + (zoom - 3.) / 20. : 1.;\n      float intensity = color.r * 255.;\n\n      // get the min, max, and current values on the power scale\n      float minPow = pow(domainMin, exponent - domainMin);\n      float maxPow = pow(domainMax, exponent);\n      float currentPow = pow(intensity, exponent);\n\n      // get intensity value mapped to range\n      float scaleIntensity = ((currentPow - minPow) / (maxPow - minPow) * (rangeMax - rangeMin)) + rangeMin;\n      // a value between 0 and 255\n      alpha = zoom < 13. ? scaleIntensity / 255. : color.g;\n\n      float year = 2000.0 + (color.b * 255.);\n      // map to years\n      if (year >= startYear && year <= endYear && year >= 2001.) {\n        color.r = 220. / 255.;\n        color.g = (72. - zoom + 102. - 3. * scaleIntensity / zoom) / 255.;\n        color.b = (33. - zoom + 153. - intensity / zoom) / 255.;\n      } else {\n        alpha = 0.;\n      }\n    "},{id:"protected-areas",name:"Protected areas",config:{type:"vector",source:{type:"vector",provider:{type:"carto",options:{account:"wri-01",layers:[{options:{cartocss:"#wdpa_protected_areas {  polygon-opacity: 1.0; polygon-fill: #704489 }",cartocss_version:"2.3.0",sql:"SELECT * FROM wdpa_protected_areas"},type:"mapnik"}]}}},render:{layers:[{type:"fill","source-layer":"layer0",paint:{"fill-color":"#5ca2d1","fill-opacity":1}},{type:"line","source-layer":"layer0",paint:{"line-color":"#000000","line-opacity":.1}}]}},paramsConfig:[],legendConfig:{type:"basic",items:[{name:"Protected areas",color:"#5ca2d1"}]}}];n(322);function _(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,a)}return n}function A(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_(n,!0).forEach(function(t){Object(c.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var J=function(){var e=Object(a.useState)(N),t=Object(s.a)(e,2),n=t[0],r=t[1],i=Object(a.useState)(JSON.stringify(N,null,2)),l=Object(s.a)(i,2),d=l[0],p=l[1],u=Object(a.useState)({}),m=Object(s.a)(u,2),g=m[0],y=m[1],b=n.map(function(e){var t=e.id,n=e.paramsConfig,a=e.sqlConfig,o=e.decodeConfig,r=e.timelineConfig,i=g[t]||{},c=!!n&&f(n,i.params),s=!!a&&f(a,i.sqlParams),l=!!o&&f(o,A({},r,{},i.decodeParams)),d=!!r&&A({},r,{},f(n,i.params),{},f(o,i.decodeParams));return A({id:t,slug:t,dataset:t,layers:[A({active:!0},e,{},i,{params:c,sqlParams:s,decodeParams:l,timelineParams:d})]},i)}),h=function(e,t){y(A({},g,Object(c.a)({},e.id,A({},g[e.id],{visibility:t}))))},v=function(e,t){y(A({},g,Object(c.a)({},e.id,A({},g[e.id],{opacity:t}))))},w=function(e,t){var n=t.id,a=t.decodeConfig;y(A({},g,Object(c.a)({},n,A({},g[n],{},a&&{decodeParams:{startDate:e[0],endDate:e[1],trimEndDate:e[2]}},{},!a&&{params:{startDate:e[0],endDate:e[1]}}))))};return o.a.createElement("div",{className:"c-app"},o.a.createElement(B.Icons,null),o.a.createElement("div",{className:"c-main"},o.a.createElement(F,null,o.a.createElement(Z.a,{mode:"json",theme:"github",value:d,onChange:function(e){p(e);try{var t=JSON.parse(e);r(t)}catch(n){}},tabSize:2,width:"100%",height:"100%",wrapEnabled:!0,showPrintMargin:!1,editorProps:{$blockScrolling:!0},debounceChangePeriod:500})),o.a.createElement("div",{className:"c-map-container"},o.a.createElement(T,{mapboxApiAccessToken:"pk.eyJ1IjoibGF5ZXItbWFuYWdlciIsImEiOiJjazA2dTJnMG0zc3lwM251dGM0aXhiYTVxIn0.AaoErQTRezfQshqnEKIg8A",mapStyle:"mapbox://styles/layer-manager/ck07vfinn01xm1co324q5vcdl",minZoom:2},function(e){return o.a.createElement(q.LayerManager,{map:e,plugin:V.a},n.map(function(e){var t=e.id,n=e.paramsConfig,a=e.sqlConfig,r=e.decodeConfig,i=e.timelineConfig,c=e.decodeFunction,s=g[t]||{},l=A({},e,{},e.config,{},s,{},!!n&&{params:f(n,A({},s.params))},{},!!a&&{sqlParams:f(a,A({},s.sqlParams))},{},!!r&&{decodeParams:f(r,A({},i,{},s.decodeParams)),decodeFunction:c});return o.a.createElement(q.Layer,Object.assign({key:e.id},l))}))}),o.a.createElement("div",{className:"c-legend"},o.a.createElement(B.Legend,{maxHeight:"65vh",collapsable:!1,sortable:!1,onChangeOrder:function(e){console.log("onChangeOrder",e)}},b.map(function(e,t){return o.a.createElement(B.LegendListItem,{index:t,key:e.slug,layerGroup:e,toolbar:o.a.createElement(B.LegendItemToolbar,null,o.a.createElement(B.LegendItemButtonOpacity,{trackStyle:{background:"#FFCC00"},handleStyle:{background:"#FFCC00"}}),o.a.createElement(B.LegendItemButtonVisibility,null)),onChangeVisibility:h,onChangeOpacity:v},o.a.createElement(B.LegendItemTypes,null),o.a.createElement(B.LegendItemTimeStep,{defaultStyles:{handleStyle:{backgroundColor:"white",borderRadius:"50%",boxShadow:"0 1px 2px 0 rgba(0, 0, 0, 0.29)",border:"0px",zIndex:2},railStyle:{backgroundColor:"#d6d6d9"},dotStyle:{visibility:"hidden",border:"0px"}},handleChange:w}))}))))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));n(323);i.a.render(o.a.createElement(J,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[193,1,2]]]);
//# sourceMappingURL=main.0933ffb8.chunk.js.map