(window.webpackJsonpsandbox=window.webpackJsonpsandbox||[]).push([[0],{132:function(e,t,o){e.exports=o(260)},196:function(e,t,o){},214:function(e,t){},258:function(e,t,o){},259:function(e,t,o){},260:function(e,t,o){"use strict";o.r(t);var n=o(6),r=o.n(n),a=o(88),i=o.n(a),c=o(3),l=o(123),s=o(10),p=o(9),u=o(15),d=o(13),m=o(16),f=o(117),g=o.n(f),y=o(48),b=o.n(y),h=o(49),v=o.n(h),w=o(75),C=o(93),O=o(122);o(195),o(196);function E(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),o.push.apply(o,n)}return o}function j(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?E(o,!0).forEach(function(t){Object(c.a)(e,t,o[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):E(o).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))})}return e}var _={zoom:2,lat:0,lng:0},S=function(e){function t(){var e,o;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(o=Object(u.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).events={},o.state={viewport:j({},_,{},o.props.viewport),flying:!1,loaded:!1},o.onLoad=function(){var e=o.props,t=e.bounds,n=e.onLoad;o.setState({loaded:!0}),!v()(t)&&t.bbox&&o.fitBounds(),n({map:o.map,mapContainer:o.mapContainer})},o.onViewportChange=function(e,t){var n=o.props.onViewportChange;o.setState({viewport:e}),n(e)},o.onResize=function(e){var t=o.props.onViewportChange,n=j({},o.state.viewport,{},e);o.setState({viewport:n}),t(n)},o.onMoveEnd=function(){var e=o.props.onViewportChange,t=o.state.viewport;if(o.map){var n=o.map.getBearing(),r=o.map.getPitch(),a=o.map.getZoom(),i=o.map.getCenter(),c=i.lng,l=j({},t,{bearing:n,pitch:r,zoom:a,latitude:i.lat,longitude:c});o.setState({viewport:l}),e(l)}},o.fitBounds=function(){var e=o.state.viewport,t=o.props,n=t.bounds,r=t.onViewportChange,a=n.bbox,i=n.options,c=j({width:o.mapContainer.offsetWidth,height:o.mapContainer.offsetHeight},e),l=new C.a(c).fitBounds([[a[0],a[1]],[a[2],a[3]]],i),s=l.longitude,p=l.latitude,u=l.zoom,d=j({},o.state.viewport,{longitude:s,latitude:p,zoom:u,transitionDuration:2500,transitionInterruption:w.b.UPDATE});o.setState({flying:!0,viewport:d}),r(d),setTimeout(function(){o.setState({flying:!1})},2500)},o}return Object(m.a)(t,e),Object(p.a)(t,[{key:"componentDidUpdate",value:function(e){var t=e.viewport,o=e.bounds,n=this.props,r=n.viewport,a=n.bounds,i=this.state.viewport;b()(r,t)||this.setState({viewport:j({},i,{},r)}),v()(a)||b()(a,o)||this.fitBounds()}},{key:"render",value:function(){var e=this,t=this.props,o=t.customClass,n=t.children,a=(t.getCursor,t.dragPan),i=t.dragRotate,s=t.scrollZoom,p=t.touchZoom,u=t.touchRotate,d=t.doubleClickZoom,m=Object(l.a)(t,["customClass","children","getCursor","dragPan","dragRotate","scrollZoom","touchZoom","touchRotate","doubleClickZoom"]),f=this.state,y=f.viewport,b=f.loaded,h=f.flying;return r.a.createElement("div",{ref:function(t){e.mapContainer=t},className:g()(Object(c.a)({"c-map":!0},o,!!o))},r.a.createElement(w.c,Object.assign({ref:function(t){e.map=t&&t.getMap()}},m,y,{width:"100%",height:"100%",dragPan:!h&&a,dragRotate:!h&&i,scrollZoom:!h&&s,touchZoom:!h&&p,touchRotate:!h&&u,doubleClickZoom:!h&&d,onViewportChange:this.onViewportChange,onResize:this.onResize,onLoad:this.onLoad,transitionInterpolator:new w.a,transitionEasing:O.a}),b&&!!this.map&&"function"===typeof n&&n(this.map)))}}]),t}(n.Component);S.defaultProps={children:null,customClass:null,viewport:_,bounds:{},dragPan:!0,dragRotate:!0,onViewportChange:function(){},onLoad:function(){},getCursor:function(e){var t=e.isHovering,o=e.isDragging;return t?"pointer":o?"grabbing":"grab"}};var P=S,I=o(89),k=o(121),L=o(40),R=o(92);o(258);function T(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),o.push.apply(o,n)}return o}function x(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?T(o,!0).forEach(function(t){Object(c.a)(e,t,o[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):T(o).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))})}return e}var M=function(){var e=R.map(function(e){var t=e.id;return{slug:t,dataset:t,layers:[x({active:!0},e)]}});return console.log(e),r.a.createElement("div",{className:"c-app"},r.a.createElement(L.Icons,null),r.a.createElement(P,{mapboxApiAccessToken:"pk.eyJ1IjoibGF5ZXItbWFuYWdlciIsImEiOiJjazA2dTJnMG0zc3lwM251dGM0aXhiYTVxIn0.AaoErQTRezfQshqnEKIg8A",mapStyle:"mapbox://styles/layer-manager/ck07vfinn01xm1co324q5vcdl"},function(e){return r.a.createElement(I.LayerManager,{map:e,plugin:k.a},R.map(function(e){return r.a.createElement(I.Layer,Object.assign({key:e.id},e))}))}),r.a.createElement("div",{className:"c-legend"},r.a.createElement(L.Legend,{maxHeight:"65vh",collapsable:!1,onChangeOrder:function(){for(var e=arguments.length,t=new Array(e),o=0;o<e;o++)t[o]=arguments[o];console.log("onChangeOrder",t)}},e.map(function(e,t){return r.a.createElement(L.LegendListItem,{index:t,key:e.slug,layerGroup:e,toolbar:r.a.createElement(L.LegendItemToolbar,null,r.a.createElement(L.LegendItemButtonOpacity,{trackStyle:{background:"#FFCC00"},handleStyle:{background:"#FFCC00"}}),r.a.createElement(L.LegendItemButtonVisibility,null),r.a.createElement(L.LegendItemButtonRemove,null)),onChangeVisibility:function(t,o){return function(){for(var e=arguments.length,t=new Array(e),o=0;o<e;o++)t[o]=arguments[o];console.log("onChangeVisibility",t)}(t,o,e.slug)},onChangeOpacity:function(t,o){return function(){for(var e=arguments.length,t=new Array(e),o=0;o<e;o++)t[o]=arguments[o];console.log("onChangeOpacity",t)}(t,o,e.slug)},onRemoveLayer:function(e){!function(){for(var e=arguments.length,t=new Array(e),o=0;o<e;o++)t[o]=arguments[o];console.log("onRemoveLayer",t)}(e)}},r.a.createElement(L.LegendItemTypes,null))}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o(259);i.a.render(r.a.createElement(M,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},92:function(e){e.exports=JSON.parse('[{"id":"0911abc4-d861-4d7a-84d6-0fa07b51d7d8","type":"layer","name":"Oil palm concessions","slug":"Oil-Palm","dataset":"c4d4e07c-c5b4-4e2c-9db1-5c3bec185f0e","description":"Oil palm areas","application":["gfw"],"iso":["MYS","SLB","PNG","LBR","IDN","CMR","COG"],"provider":"cartodb","userId":"59db4eace9c1380001d6e4c3","default":true,"protected":true,"published":true,"env":"production","layerConfig":{"account":"wri-01","body":{"layers":[{"options":{"cartocss":"#gfw_oil_palm{  polygon-fill: #ee9587;  polygon-opacity: 0.7;  line-color: #ee9587;  line-width: 1;  line-opacity: 1;}","cartocss_version":"2.3.0","sql":"SELECT cartodb_id, the_geom_webmercator, name,company, type, country, area_ha FROM gfw_oil_palm"},"type":"cartodb"}],"maxzoom":19,"minzoom":2,"vectorLayers":[{"paint":{"fill-color":"#ee9587","fill-opacity":0.7},"source-layer":"layer0","type":"fill"}]},"params_config":[],"sql_config":[{"key":"where","key_params":[{"key":"country","required":false}]}]},"legendConfig":{"type":"basic","items":[{"name":"Oil palm","color":"#ee9587"}]},"interactionConfig":{"output":[{"column":"name","format":null,"property":"Name","type":"string"},{"column":"company","format":null,"property":"Company","type":"string"},{"column":"country","format":null,"property":"Country","type":"string"},{"column":"type","format":null,"property":"Type","type":"string"},{"column":"area_ha","format":null,"property":"Area","suffix":"ha","type":"number"},{"column":"cartodb_id","format":null,"property":"cartodb_id","type":"number","hidden":true},{"column":"the_geom_webmercator","format":"json","property":"the_geom","type":"json","hidden":true}],"type":"intersection"},"applicationConfig":{"default":true,"active":true,"global":true,"metadata":"gfw_oil_palm","analysisEndpoint":"use"},"staticImageConfig":{},"updatedAt":"2019-07-08T07:56:42.234Z"},{"id":"74c4bb92-9799-45f5-9f4d-f44b76508ce8","name":"Biodiversity Intactness","slug":"Biodiversity-Intactness_2","dataset":"f8620a94-a617-4221-b74e-78830df9ec9f","description":"","application":["ng"],"iso":[],"provider":"gee","userId":"57a0aa1071e394dd32ffe137","default":false,"protected":false,"published":true,"env":"production","layerConfig":{"body":{"sldValue":"<RasterSymbolizer><ColorMap type=\\"ramp\\" extended=\\"false\\" ><ColorMapEntry color=\\"#ffffcc\\" quantity=\\"0.6\\"  opacity=\\"1\\" /><ColorMapEntry color=\\"#c2e699\\" quantity=\\"0.7\\" /><ColorMapEntry color=\\"#78c679\\" quantity=\\"0.8\\" /><ColorMapEntry color=\\"#31a354\\" quantity=\\"0.9\\"  /><ColorMapEntry color=\\"#006837\\" quantity=\\"1.0\\"  /></ColorMap></RasterSymbolizer>","styleType":"sld"},"assetId":"users/resourcewatch/bio_014_bio_intactness","type":"gee"},"legendConfig":{"items":[{"color":"#ffffcc","name":"\u226460"},{"color":"#c2e699","name":"\u226470"},{"color":"#78c679","name":"\u226480"},{"color":"#31a354","name":"\u226490"},{"color":"#006837","name":"\u2264100"}],"type":"choropleth"},"interactionConfig":{"output":[{"format":"0.00","type":"number","property":"Proportion intact","column":"x.b1.mean"}],"config":{"url":"https://api.resourcewatch.org/v1/query/0e565ddf-74fd-4f90-a6b8-c89d747a89ab?sql=select st_summarystats(rast, \'b1\', false) as x from \'users/resourcewatch/bio_014_bio_intactness\' where ST_INTERSECTS(ST_SetSRID(ST_GeomFromGeoJSON(\'{\\"type\\":\\"Point\\",\\"coordinates\\":[{{lng}},{{lat}}]}\'),4326),the_geom)"},"type":"intersection"},"applicationConfig":{},"staticImageConfig":{},"updatedAt":"2019-05-14T15:38:14.021Z"}]')}},[[132,1,2]]]);
//# sourceMappingURL=main.11224379.chunk.js.map